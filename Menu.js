"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;var desc=Object.getOwnPropertyDescriptor(m,k);if(!desc||("get"in desc?!m.__esModule:desc.writable||desc.configurable)){desc={enumerable:true,get:function(){return m[k]}}}Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};Object.defineProperty(exports,"__esModule",{value:true});var jsx_runtime_1=require("react/jsx-runtime");var react_1=__importStar(require("react"));var skipMenu_1=require("./js/skipMenu");var useEffectOnce=function(effect){var destroyFunc=(0,react_1.useRef)();var effectCalled=(0,react_1.useRef)(false);var renderAfterCalled=(0,react_1.useRef)(false);var _a=(0,react_1.useState)(0),val=_a[0],setVal=_a[1];if(effectCalled.current){renderAfterCalled.current=true}(0,react_1.useEffect)(function(){if(!effectCalled.current){destroyFunc.current=effect();effectCalled.current=true}setVal(val+1);return function(){if(!renderAfterCalled.current){return}if(destroyFunc.current){destroyFunc.current()}}},[])};var Menu=function(props){var menuRef=react_1.default.useRef(null);var _a=react_1.default.useState(null),skipMenu=_a[0],setSkipMenu=_a[1];useEffectOnce(function(){if(!skipMenu){var skipMenuProps_1={attachTo:menuRef.current,reloadOnChange:true};Object.keys(props).map(function(key){skipMenuProps_1[key]=props[key]});var newSkipMenu=new skipMenu_1.SkipMenu(skipMenuProps_1);newSkipMenu.init();setSkipMenu(newSkipMenu)}return function cleanup(){if(skipMenu!==null){skipMenu.remove()}}});return(0,jsx_runtime_1.jsx)("div",{"data-testid":"componentContent",ref:menuRef})};exports.default=Menu;